{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/v1/dialogs/{companionId}":{"put":{"tags":["dialog-resource-impl"],"operationId":"setStatusMessageRead","parameters":[{"name":"companionId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SetStatusMessageReadRs"}}}}}}},"/api/v1/dialogs":{"get":{"tags":["dialog-resource-impl"],"operationId":"getAllDialogs","parameters":[{"name":"offset","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"itemPerPage","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":20}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetDialogsRs"}}}}}}},"/api/v1/dialogs/unreaded":{"get":{"tags":["dialog-resource-impl"],"operationId":"getUnreadMessageCount","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UnreadCountRs"}}}}}}},"/api/v1/dialogs/messages":{"get":{"tags":["dialog-resource-impl"],"operationId":"getAllMessages","parameters":[{"name":"companionId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"itemPerPage","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":20}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetMessagesRs"}}}}}}}},"components":{"schemas":{"SetStatusMessageReadDto":{"type":"object","properties":{"message":{"type":"string","description":"Сообщение о выполнении","example":"Ок"}},"description":"Dto ответа на запрос пометить сообщение как прочитанное"},"SetStatusMessageReadRs":{"type":"object","properties":{"error":{"type":"string","description":"Ошибка по запросу","example":"Неверный запрос"},"timestamp":{"type":"integer","description":"Метка времени","format":"int64","example":1644234125},"data":{"$ref":"#/components/schemas/SetStatusMessageReadDto"},"error_description":{"type":"string","description":"Описание ошибки","example":"Неверный код авторизации"}},"description":"Ответ на запрос пометить сообщение как прочитанное"},"AccountDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"phone":{"type":"string"},"photo":{"type":"string"},"about":{"type":"string"},"city":{"type":"string"},"country":{"type":"string"},"token":{"type":"string"},"statusCode":{"type":"string","enum":["FRIEND","REQUEST_TO","REQUEST_FROM","BLOCKED","DECLINED","SUBSCRIBED","NONE","WATCHING","REJECTING"]},"firstName":{"type":"string"},"lastName":{"type":"string"},"regDate":{"type":"string","format":"date-time"},"birthDate":{"type":"string","format":"date-time"},"messagePermission":{"type":"string"},"lastOnlineTime":{"type":"string","format":"date-time"},"isOnline":{"type":"boolean"},"isBlocked":{"type":"boolean"},"isDeleted":{"type":"boolean"},"photoId":{"type":"string"},"photoName":{"type":"string"},"role":{"type":"string","enum":["USER","MODERATOR","ADMIN"]},"createdOn":{"type":"string","format":"date-time"},"updatedOn":{"type":"string","format":"date-time"},"password":{"type":"string"}},"description":"Собеседник"},"DialogDto":{"type":"object","properties":{"id":{"type":"integer","description":"Id диалога","format":"int64","example":1},"unreadCount":{"type":"integer","description":"Количество непрочитанных сообщений диалога","format":"int64","example":10},"conversationPartner":{"$ref":"#/components/schemas/AccountDto"},"lastMessage":{"$ref":"#/components/schemas/MessageDto"}},"description":"Dto диалога"},"GetDialogsRs":{"type":"object","properties":{"error":{"type":"string","description":"Ошибка по запросу","example":"Неверный запрос"},"errorDescription":{"type":"string","description":"Описание ошибки","example":"Неверный код авторизации"},"timestamp":{"type":"integer","description":"Метка времени","format":"int64","example":1644234125},"total":{"type":"integer","description":"Количество диалогов пользователя в списке","format":"int32","example":10},"offset":{"type":"integer","description":"Отступ от начала списка","format":"int32","example":0},"perPage":{"type":"integer","description":"Количество диалогов пользователя на страницу","format":"int32","example":20},"currentUserId":{"type":"integer","description":"Id текущего пользователя","format":"int64","example":55},"data":{"type":"array","description":"Список диалогов пользователя","items":{"$ref":"#/components/schemas/DialogDto"}}},"description":"Ответ на запрос получения списка диалогов пользователя"},"MessageDto":{"type":"object","properties":{"id":{"type":"integer","description":"Id сообщения","format":"int64","example":1},"time":{"type":"integer","description":"Дата и время отправки","format":"int64","example":1464612365},"authorId":{"type":"integer","description":"Id автора сообщения","format":"int64","example":5},"recipientId":{"type":"integer","description":"Id получателя сообщения","format":"int64","example":8},"messageText":{"type":"string","description":"Текст сообщения","example":"Сообщение"},"status":{"type":"string","description":"Статус прочтения","example":"SENT","enum":["SENT","READ"]}},"description":"Dto сообщения"},"UnreadCountDto":{"type":"object","properties":{"count":{"type":"integer","description":"Количество непрочитанных сообщений в диалоге","format":"int64","example":10}},"description":"Dto для количества непрочитанных сообщений диалога"},"UnreadCountRs":{"type":"object","properties":{"error":{"type":"string","description":"Ошибка по запросу","example":"Неверный запрос"},"timestamp":{"type":"integer","description":"Метка времени","format":"int64","example":1644234125},"data":{"$ref":"#/components/schemas/UnreadCountDto"},"error_description":{"type":"string","description":"Описание ошибки","example":"Неверный код авторизации"}},"description":"Ответ на запрос получения количества непрочитанных сообщений диалога"},"GetMessagesRs":{"type":"object","properties":{"error":{"type":"string","description":"Ошибка по запросу","example":"Неверный запрос"},"errorDescription":{"type":"string","description":"Описание ошибки","example":"Неверный код авторизации"},"timestamp":{"type":"integer","description":"Метка времени","format":"int64","example":1644234125},"total":{"type":"integer","description":"Количество сообщений диалога в списке","format":"int32","example":10},"offset":{"type":"integer","description":"Отступ от начала списка","format":"int32","example":0},"perPage":{"type":"integer","description":"Количество сообщений диалога на страницу","format":"int32","example":20},"data":{"type":"array","description":"Список сообщений диалога","items":{"$ref":"#/components/schemas/MessageShortDto"}}},"description":"Ответ на запрос получения списка сообщений в диалоге"},"MessageShortDto":{"type":"object","properties":{"id":{"type":"integer","description":"Id сообщения","format":"int64","example":1},"authorId":{"type":"integer","description":"Id автора сообщения","format":"int64"},"time":{"type":"integer","description":"Дата и время отправки","format":"int64","example":1464612365},"messageText":{"type":"string","description":"Текст сообщения","example":"Сообщение"}},"description":"Dto сообщения краткое"}}}}